[supervisord]
nodaemon=true

[program:elasticsearch]
command=su elasticsearch -c 'ES_JAVA_OPTS="-Xms1g -Xmx1g" ES_PATH_CONF=/etc/elasticsearch/elasticsearch.yml /usr/share/elasticsearch/bin/elasticsearch'
stdout_logfile=/var/log/elasticsearch_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/elasticsearch_stderr.log
stderr_logfile_maxbytes=50MB

[program:minio]
command=/usr/local/bin/minio server --address ":3535" --console-address ":3536" /data/minio
environment=MINIO_ACCESS_KEY="minioadmin",MINIO_SECRET_KEY="minioadmin"
stdout_logfile=/var/log/minio_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/minio_stderr.log
stderr_logfile_maxbytes=50MB

[program:mongodb]
command=/usr/bin/mongod --dbpath /data/mongo --bind_ip 0.0.0.0
stdout_logfile=/var/log/mongodb_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/mongodb_stderr.log
stderr_logfile_maxbytes=50MB

[program:influxdb]
command=/usr/bin/influxd -config /etc/influxdb/influxdb.conf
stdout_logfile=/var/log/influxdb_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/influxdb_stderr.log
stderr_logfile_maxbytes=50MB

[program:redis]
command=/usr/bin/redis-server /etc/redis/redis.conf
stdout_logfile=/var/log/redis_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/redis_stderr.log
stderr_logfile_maxbytes=50MB

[program:hearth]
command=bash -c 'cd /hearth && npm start'
stdout_logfile=/var/log/hearth_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/hearth_stderr.log
stderr_logfile_maxbytes=50MB

[program:openhim]
command=bash -c 'cd /openhim && npm start'
stdout_logfile=/var/log/openhim_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/openhim_stderr.log
stderr_logfile_maxbytes=50MB

[program:proxy]
command=bash -c 'cd /app && node index.js'
stdout_logfile=/var/log/proxy_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/proxy_stderr.log
stderr_logfile_maxbytes=50MB

[program:countryconfig]
command=bash -c 'cd /country-config && yarn start:prod'
stdout_logfile=/var/log/countryconfig_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/countryconfig_stderr.log
stderr_logfile_maxbytes=50MB

[program:opencrvs]
command=bash /app/start.sh
autorestart=false
stdout_logfile=/var/log/opencrvs_stdout.log
stdout_logfile_maxbytes=50MB
stderr_logfile=/var/log/opencrvs_stderr.log
stderr_logfile_maxbytes=50MB

[supervisorctl]